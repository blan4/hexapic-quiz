<link rel="import" href="../bower_components/polymer/polymer.html" />
<link rel="import" href="../bower_components/core-ajax/core-ajax.html" />

<polymer-element name="x-hexapic">
    <template>
        <link rel="stylesheet" href="x-hexapic.css" />

        <img id="img"/>

        <content></content>
    </template>

    <script>
        Polymer({
            publish: {
                tag: null
            },
            observe: {
                'tag': 'update'
            },
            update: function() {
                var image = new Image();
                image.src = "http://hexapicserv.appspot.com?tag=" + this.tag + "&time=" + (new Date()).getTime();

                image.onload = function() {
                    this.$.img.src = image.src || '';
                }.bind(this);

                console.log("Loading: " + this.tag);
            }
        });
    </script>
</polymer-element>

